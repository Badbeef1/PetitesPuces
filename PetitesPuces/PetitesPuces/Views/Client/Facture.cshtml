@using PetitesPuces.Models
@model PPCommandes
@{
    Layout = null;
}

<!DOCTYPE html>
<style>
    h5{
        overflow-wrap:break-word;
    }
</style> 
<body class="container">
    <div class="row">
        <div class="col-md-5">
            <h1 class="d-flex align-items-end h-100">Commande #@Model.NoCommande</h1>
        </div>
        <div class="offset-md-2"></div>
        <div class="col-md-5">
            <h3 class="d-flex align-items-end h-100" style="float:right">Date: @Model.DateCommande</h3>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-6 text-left"><h1>Destinataire</h1></div>
        <div class="col-md-6 text-right"><h1>Expéditeur</h1></div>
    </div>
    <div class="row" style="margin:0">
        <div class="col-md-5 border border-dark" style="padding:5px">
            <div class="row">
                <div class="col-md-12">
                    <h3>@Model.PPClients.Prenom  @Model.PPClients.Nom</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>Client # : @Model.PPClients.NoClient</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPClients.AdresseEmail</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPClients.Rue, @Model.PPClients.Ville, @Model.PPClients.Province @Model.PPClients.Pays, @Model.PPClients.CodePostal</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPClients.Tel1</h5>
                    <h5>@Model.PPClients.Tel2</h5>
                </div>
            </div>
        </div>
        <div class="offset-md-2"></div>
        <div class="col-md-5 border border-dark" style="padding:5px">
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPVendeurs.NomAffaires</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPVendeurs.Prenom  @Model.PPVendeurs.Nom</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>Vendeur # : @Model.PPVendeurs.NoVendeur</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPVendeurs.AdresseEmail</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPVendeurs.Rue, @Model.PPVendeurs.Ville, @Model.PPVendeurs.Province @Model.PPVendeurs.Pays, @Model.PPVendeurs.CodePostal</h5>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h5>@Model.PPVendeurs.Tel1</h5>
                    <h5>@Model.PPVendeurs.Tel2</h5>
                </div>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <table class="table table-striped">
            <thead>
                <tr class="d-flex">
                    <th scope="col" class="text-right col-1">#</th>
                    <th scope="col" class="col-2">Nom</th>
                    <th scope="col" class="col-5">Description</th>
                    <th scope="col" class="text-right col-1">Poids</th>
                    <th scope="col" class="text-right col-1">Prix unitaire</th>
                    <th scope="col" class="text-right col-1">Quantité</th>
                    <th scope="col" class="text-right col-1">Sous-total</th>
                </tr>
            </thead>
            <tbody>
                @{
                    int compteur = 0;
                    foreach (PPDetailsCommandes detComm in Model.PPDetailsCommandes)
                    {
                        compteur++;
                        <tr class="d-flex">
                            <th scope="row" class="text-right col-1">
                                @compteur
                            </th>
                            <td class="col-2">
                                @detComm.PPProduits.Nom
                            </td>
                            <td class="col-5">
                                @detComm.PPProduits.Description
                            </td>
                            <td class="text-right col-1">
                                @detComm.PPProduits.Poids Lbs
                            </td>
                            <td class="text-right col-1">
                                @Double.Parse(detComm.PrixVente.ToString()).ToString("0.00") $
                            </td>
                            <td class="text-right col-1">
                                @detComm.Quantité
                            </td>
                            <td class="text-right col-1">
                                @{
                                    string montantTotal = (Double.Parse((detComm.PrixVente * detComm.Quantité).ToString())).ToString("0.00");
                                }
                                @montantTotal $
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <hr />
    <div class="row">
            <div class="offset-md-7"></div>
            <div class="col-md-3 text-left border-left">
                <h5>
                    <strong>
                        Sous-total<br />
                        @if (Model.CoutLivraison > 0)
                        {
                            <span>Frais de livraison<br /></span>
                        }
                        @if (Model.TPS > 0)
                        {

                            <span>TPS<br /></span>
                        }
                        @if (Model.TVQ > 0)
                        {

                            <span>TVQ<br /></span>
                        }
                        Total <br />
                    </strong>
                </h5>
            </div>
            <div class="col-md-2 text-right">
                <h5>
                    <strong>
                        @Double.Parse(Model.MontantTotAvantTaxes.ToString()).ToString("0.00") $<br />
                        @if (Model.CoutLivraison > 0)
                        {
                            <span>@Double.Parse(Model.CoutLivraison.ToString()).ToString("0.00") $<br /></span>
                        }
                        @if (Model.TPS > 0)
                        {

                            <span>@Double.Parse(Model.TPS.ToString()).ToString("0.00") $<br /></span>
                        }
                        @if (Model.TVQ > 0)
                        {

                            <span>@Double.Parse(Model.TVQ.ToString()).ToString("0.00") $<br /></span>
                        }
                        @(Double.Parse((Model.MontantTotAvantTaxes + Model.CoutLivraison + Model.TPS + Model.TVQ).ToString()).ToString("0.00")) $<br />
                    </strong>
                </h5>
            </div>
        </div>
    <div class="align-items-center"><input type="button" value="Imprimer en PDF"/></div>
</body>
</html>
